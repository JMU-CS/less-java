main() {
    list = [1, 3, 2, -5, 999, 4, 2, 8]

    printf("Before: %s\n", list)    // [1, 3, 2, -5, 999, 4, 2, 8]
    sort(list, 0, list.size() - 1)
    printf("After: %s\n", list)     // [-5, 1, 2, 2, 3, 4, 8, 999]
}

partition(A, lo, hi) {
    pivot = A.get(hi)
    i = lo - 1

    for (j: lo -> hi) {
        if (A.get(j) < pivot) {
            i = i + 1

            temp = A.get(i)
            A.set(i, A.get(j))
            A.set(j, temp)
        }
    }

    temp = A.get(i + 1)
    A.set(i + 1, A.get(hi))
    A.set(hi, temp)

    return i + 1
}

sort(A, lo, hi) {
    if (lo < hi) {
        p = partition(A, lo, hi)
        sort(A, lo, p - 1)
        sort(A, p + 1, hi)
    }
}
