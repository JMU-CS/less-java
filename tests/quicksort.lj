main() {
    /*list = [1, 3, 2]*/
    list = [1, 3, 2, -5, 999, 4, 2, 8]

    printf("Before: %s\n", list)
    sort(list, 0, list.size() - 1)
    printf("After: %s\n", list)
}

partition(list, low, high) {
    pivot = list.get(high)
    i = low - 1

    for (j: low -> high) {
        if (list.get(j) <= pivot) {
            i = i + 1

            temp = list.get(i)
            list.set(i, j)
            list.set(j, temp)
        }
    }

    temp = list.get(i + 1)
    list.set(i + 1, list.get(high))
    list.set(high, temp)

    return i + 1
}

sort(list, low, high) {
    if (low < high) {
        pi = partition(list, low, high)
        sort(list, low, pi - 1)
        sort(list, pi + 1, high)
    }
}
